<!DOCTYPE html>
<html>
	<header>
		<meta charset=utf-8>
		<title>Hermes</title>
	</header>
	<style>
		body {
			background-color: #00394d;
		}
		.center {
			 display: flex;
			 justify-content: center;
			 align-items: center;
		}
	</style>
	<script>
		function post_choice(choice) {
			document.getElementById("container").style = "display: none;";
			var xhr = new XMLHttpRequest();
			xhr.open("POST", '/service', true);

			//Send the proper header information along with the request
			xhr.setRequestHeader("Content-Type", "text/plain");

			xhr.onreadystatechange = async function() { // Call a function when the state changes.
				if (this.readyState === XMLHttpRequest.DONE && this.status === 200) {
					// Request finished. Do processing here.
					console.log("sucess... redirecting...");
					document.getElementById("demo").innerHTML = "redirecting, please wait...";
					await new Promise(r => setTimeout(r, 15000));
					window.location = "https://kavita.oncoto.app"
				}
			}
			xhr.send(choice);
			document.getElementById("demo").innerHTML = "loading service...";
			document.getElementById("kavita").style = "display: none;";
			document.getElementById("header").style = "display: none;";
			document.getElementById("container").style = "";
		}
	</script>
	<body>
		<div class="container" id="container">
			<h1 id="header" class="center">SELECT A SERVICE</h1>
			<div id="kavita" class="center" onclick="post_choice('s')">
				<img src='assets/kavita.svg'>
			</div>
			<p id="demo" class="center"></p>
		</div>
	</body>
</html>
